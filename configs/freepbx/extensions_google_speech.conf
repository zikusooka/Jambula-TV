[globals](+)
;#include globals_custom.conf


[google-speech-recog]
; agi(speech-recog.agi,[lang],[timeout],[intkey],[NOBEEP])
exten => 876,1,Answer()
exten => 876,n,agi(speech-recog.agi,en-US,10000)
exten => 876,n,Noop(== The text you just said was: ${utterance} ==)
exten => 876,n,Noop(== The probability to be right is: ${confidence} ==)
exten => 876,n,Hangup()

;Speech recognition demo also using googletts.agi for text to speech synthesis:
exten => 877,1,Answer()
exten => 877,n,agi(googletts.agi,"Please say something in English. When done press the pound key.",en)
exten => 877,n(record),agi(speech-recog.agi,en-US)
exten => 877,n,Noop(== Script returned: ${status} , ${id} , ${confidence} , ${utterance} ==)
exten => 877,n,GotoIf($["${status}" = "0"]?success:fail)

exten => 877,n(success),GotoIf($["${confidence}" > "0.9"]?playback:retry)

exten => 877,n(playback),agi(googletts.agi,"The text you just said was...",en)
exten => 877,n,agi(googletts.agi,"${utterance}",en)
exten => 877,n,goto(end)

exten => 877,n(retry),agi(googletts.agi,"Can you please repeat more clearly?",en)
exten => 877,n,goto(record)

exten => 877,n(fail),agi(googletts.agi,"Failed to get speech data.",en)
exten => 877,n(end),Hangup()
