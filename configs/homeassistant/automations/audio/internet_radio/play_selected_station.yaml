# Play selected Internet radio station  
alias: "Play selected Internet radio station"
initial_state: True


trigger:
  - platform: state
    entity_id: input_select.internet_radio_station


condition:
  condition: and
  conditions:


    # Internet state
    - condition: template
      value_template: "{{ is_state('binary_sensor.internet', 'on') }}"


action:

  # Turn off FM radio if on
  - service: shell_command.fm_radio_stop

  # Turn on Internet radio
  - service: shell_command.internet_radio_play_selected_station
    data_template:
      station: "{{ states('input_select.internet_radio_station') }}"

  # set volume
  - service: media_player.volume_set
    data:
      entity_id: media_player.now_playing
      volume_level: !secret internet_radio_start_up_volume_level
