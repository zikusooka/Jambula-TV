alias: Rainfall coming
initial_state: True


trigger:

  - platform: state
    entity_id: sensor.pws_weather_1h
    to: 'Chance of a Thunderstorm'

  - platform: state
    entity_id: weather.dark_sky
    to: 'rainy'

  - platform: numeric_state
    entity_id: sensor.jambulatv_precipitation
    above: 5.6

  - platform: state
    entity_id: sensor.openweathermap_forecast_condition
    to: 'rainy'


condition:
  condition: and
  conditions:

    # Internet state
    #- condition: template
      #value_template: "{{ is_state('binary_sensor.internet', 'on') }}"


action:

  # Run script
  # ----------
  - service: script.turn_on
    entity_id: script.rainfall_coming
