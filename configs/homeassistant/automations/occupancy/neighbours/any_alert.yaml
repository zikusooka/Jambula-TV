alias: Arrival alert (Resident 5)
initial_state: True

trigger:

  - platform: state
    entity_id: sensor.resident5_tshark_status
    to: 'Home'

  - platform: state
    entity_id: sensor.resident4_tshark_status
    to: 'Home'

  - platform: state
    entity_id: sensor.resident3_tshark_status
    to: 'Home'

  - platform: state
    entity_id: sensor.resident2_tshark_status
    to: 'Home'

  - platform: state
    entity_id: sensor.resident1_tshark_status
    to: 'Home'


condition:
  condition: and
  conditions:

    # Last triggered more than 5 minute(s) ago
    #- condition: template
      #value_template: '{{ (as_timestamp(now()) - as_timestamp(states.sensor.resident5_tshark_status.attributes.last_triggered | default(0)) | int > 300)}}'


action:

  - service: notify.jambulatv
    data_template:
      title: '[JambulaTV]'
      message: 'A resident has been sighted'
