alias: Zik has been away for a short time
initial_state: True

trigger:

  - platform: state
    entity_id: person.zik
    from: 'Home'
    to: 'Away'
    for:
      minutes: 3

  - platform: state
    entity_id: !secret presence_away_for_short_sensor_15_minutes_zik
    to: !secret presence_away_for_short_threshold
    for:
      minutes: 3


condition:
  condition: and
  conditions:

    # Zik is not using the Laptop i.e. Kampala idle for 15 mins
    - condition: state
      entity_id: sensor.pc_usage_status_for_kampala
      state: 'idle'
      for:
        minutes: 15


action:
  - service: script.zik_away_for_a_short_time
