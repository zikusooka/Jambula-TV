# Power outages happening now - unplanned
alias: "Unplanned power outage on-going"
initial_state: True


trigger:

  - platform: state
    entity_id: sensor.power_outage_on_going


condition:
  condition: and
  conditions:

    # Internet state
    - condition: template
      value_template: "{{ is_state('binary_sensor.internet', 'on') }}"

    # Power outage state - ongoing
    - condition: template
      value_template: "{{ not is_state('sensor.power_outage_on_going', 'none') }}"

    # Power outage state - ongoing
    - condition: template
      value_template: "{{ not is_state('sensor.power_outage_on_going', '') }}"


action:

  # Run script
  # ----------
  - service: script.turn_on
    entity_id: script.power_supply_umeme_ongoing
