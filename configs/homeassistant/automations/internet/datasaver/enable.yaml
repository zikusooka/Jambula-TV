alias: Internet Data Saver (On)
initial_state: True

trigger:

  - platform: state
    entity_id: input_boolean.internet_data_saver
    to: 'on'

condition:
  condition: and
  conditions:

    # Someone at home
    #- condition: template
    #  value_template: "{{ is_state('group.presence_home', 'home') }}"


action:

  # Turn on data saver mode
  # -----------------------
  - service: shell_command.internet_data_saver_on

  # VOICE ALERT - sound alert notice using Intercom i.e. paging
  # -----------------------------------------------------------
  # a) Mute speaker volume if there is already audio playing
  - service: shell_command.speaker_volume_mute
  # Pause for a second - Needed - DO NOT REMOVE unless you have a fix!
  - delay:
      seconds: 1
  # b) Chime alert using house speakers
  - service: shell_command.play_chime_alert
  # c) Internet data saver on sound effect using house speakers
  #- service: shell_command.
  # d) Voice alert using house speakers
  - service: shell_command.internet_data_saver_was_enabled
  # e) Unmute speaker volume 
  - service: shell_command.speaker_volume_unmute 
