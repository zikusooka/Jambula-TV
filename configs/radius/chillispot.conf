# MySQL counters for Chillispot
###############################

	sqlcounter weeklycounter {
               counter_name = Weekly-Session-Time
               check_name = Max-Weekly-Session
               sql_module_instance = sql
               key = User-Name
               reset = weekly
               query = "SELECT IFNULL(SUM(AcctSessionTime),0) FROM radacct WHERE username = '%{${key}}'"
       }
	   
	   
	sqlcounter quaterlycounter {
               counter_name = Quaterly-Session-Time
               check_name = Max-Quaterly-Session
               sql_module_instance = sql
               key = User-Name
               reset = 3m
               query = "SELECT IFNULL(SUM(AcctSessionTime),0) FROM radacct WHERE username = '%{${key}}'"
       }
	   

	sqlcounter yearlycounter {
               counter_name = Yearly-Session-Time
               check_name = Max-Yearly-Session
               sql_module_instance = sql
               key = User-Name
               reset = 12m
               query = "SELECT IFNULL(SUM(AcctSessionTime),0) FROM radacct WHERE username = '%{${key}}'"
       }



	sqlcounter accessperiod {

                counter_name = Max-Access-Period-Never
                check_name = Access-Period
                sql_module_instance = sql
                key = User-Name
                reset = never
                query = "SELECT IF(COUNT(radacctid>=1),(UNIX_TIMESTAMP() - IFNULL(UNIX_TIMESTAMP(AcctStartTime),0)),0) FROM radacct WHERE username = '%{${key}}' AND AcctSessionTime >= 1 ORDER BY AcctStartTime LIMIT 1"                
        }


	sqlcounter counterChilliSpotMaxTotalOctetsDaily {
			counter_name = ChilliSpot-Max-Total-Octets-Daily
			check_name = CS-Total-Octets-Daily
			counter-type = data
			reply_name = ChilliSpot-Max-Total-Octets
			sql_module_instance = sql
			key = User-Name
			reset = daily
			query = "SELECT IFNULL((SUM(AcctInputOctets + AcctOutputOctets)),0) FROM radacct WHERE username = '%{${key}}' AND UNIX_TIMESTAMP(AcctStartTime) + AcctSessionTime > '%%b'"
	}


	sqlcounter counterChilliSpotMaxTotalOctetsWeekly {
			counter_name = ChilliSpot-Max-Total-Octets-Weekly
			check_name = CS-Total-Octets-Weekly
			counter-type = data
			reply_name = ChilliSpot-Max-Total-Octets
			sql_module_instance = sql
			key = User-Name
			reset = weekly
			query = "SELECT IFNULL((SUM(AcctInputOctets + AcctOutputOctets)),0) FROM radacct WHERE username = '%{${key}}' AND UNIX_TIMESTAMP(AcctStartTime) + AcctSessionTime > '%%b'"
	}


	sqlcounter counterChilliSpotMaxTotalOctetsMonthly {
			counter_name = ChilliSpot-Max-Total-Octets-Monthly
			check_name = CS-Total-Octets-Monthly
			counter-type = data
			reply_name = ChilliSpot-Max-Total-Octets
			sql_module_instance = sql
			key = User-Name
			reset = monthly
			query = "SELECT IFNULL((SUM(AcctInputOctets + AcctOutputOctets)),0)FROM radacct WHERE username = '%{${key}}' AND UNIX_TIMESTAMP(AcctStartTime) + AcctSessionTime > '%%b'"
	}

	
	sqlcounter counterChilliSpotMaxTotalOctetsQuarterly {
			counter_name = ChilliSpot-Max-Total-Octets-Quarterly
			check_name = CS-Total-Octets-Quarterly
			counter-type = data
			reply_name = ChilliSpot-Max-Total-Octets
			sql_module_instance = sql
			key = User-Name
			reset = 3m
			query = "SELECT IFNULL((SUM(AcctInputOctets + AcctOutputOctets)),0) FROM radacct WHERE username = '%{${key}}' AND UNIX_TIMESTAMP(AcctStartTime) + AcctSessionTime > '%%b'"
	}

	
	sqlcounter counterChilliSpotMaxTotalOctetsYearly {
			counter_name = ChilliSpot-Max-Total-Octets-Yearly
			check_name = CS-Total-Octets-Yearly
			counter-type = data
			reply_name = ChilliSpot-Max-Total-Octets
			sql_module_instance = sql
			key = User-Name
			reset = 12m
			query = "SELECT IFNULL((SUM(AcctInputOctets + AcctOutputOctets)),0) FROM radacct WHERE username = '%{${key}}' AND UNIX_TIMESTAMP(AcctStartTime) + AcctSessionTime > '%%b'"
	}
	
	sqlcounter counterChilliSpotMaxTotalOctetsAll {
			counter_name = ChilliSpot-Max-Total-Octets
			check_name = CS-Total-Octets
			counter-type = data
			reply_name = ChilliSpot-Max-Total-Octets
			sql_module_instance = sql
			key = User-Name
			reset = never
			query = "SELECT IFNULL((SUM(AcctInputOctets + AcctOutputOctets)),0) FROM radacct WHERE username = '%{${key}}' AND UNIX_TIMESTAMP(AcctStartTime) + AcctSessionTime > '%%b'"
	}


	sqlcounter counterChilliSpotMaxInputOctetsDaily {
			counter_name = ChilliSpot-Max-Input-Octets-Daily
			check_name = CS-Input-Octets-Daily
			counter-type = data
			reply_name = ChilliSpot-Max-Input-Octets
			sql_module_instance = sql
			key = User-Name
			reset = daily
			query = "SELECT IFNULL(SUM(AcctInputOctets),0) FROM radacct WHERE username = '%{${key}}' AND UNIX_TIMESTAMP(AcctStartTime) + AcctSessionTime > '%%b'"
	}


	sqlcounter counterChilliSpotMaxInputOctetsWeekly {
			counter_name = ChilliSpot-Max-Input-Octets-Weekly
			check_name = CS-Input-Octets-Weekly
			counter-type = data
			reply_name = ChilliSpot-Max-Input-Octets
			sql_module_instance = sql
			key = User-Name
			reset = weekly
			query = "SELECT IFNULL(SUM(AcctInputOctets),0) FROM radacct WHERE username = '%{${key}}' AND UNIX_TIMESTAMP(AcctStartTime) + AcctSessionTime > '%%b'"
	}


	sqlcounter counterChilliSpotMaxInputOctetsMonthly {
			counter_name = ChilliSpot-Max-Input-Octets-Monthly
			check_name = CS-Input-Octets-Monthly
			counter-type = data
			reply_name = ChilliSpot-Max-Input-Octets
			sql_module_instance = sql
			key = User-Name
			reset = monthly
			query = "SELECT IFNULL(SUM(AcctInputOctets),0) FROM radacct WHERE username = '%{${key}}' AND UNIX_TIMESTAMP(AcctStartTime) + AcctSessionTime > '%%b'"
	}

	
	sqlcounter counterChilliSpotMaxInputOctetsQuarterly {
			counter_name = ChilliSpot-Max-Input-Octets-Quarterly
			check_name = CS-Input-Octets-Quarterly
			counter-type = data
			reply_name = ChilliSpot-Max-Input-Octets
			sql_module_instance = sql
			key = User-Name
			reset = 3m
			query = "SELECT IFNULL(SUM(AcctInputOctets),0) FROM radacct WHERE username = '%{${key}}' AND UNIX_TIMESTAMP(AcctStartTime) + AcctSessionTime > '%%b'"
	}

	
	sqlcounter counterChilliSpotMaxInputOctetsYearly {
			counter_name = ChilliSpot-Max-Input-Octets-Yearly
			check_name = CS-Input-Octets-Yearly
			counter-type = data
			reply_name = ChilliSpot-Max-Input-Octets
			sql_module_instance = sql
			key = User-Name
			reset = 12m
			query = "SELECT IFNULL(SUM(AcctInputOctets),0) FROM radacct WHERE username = '%{${key}}' AND UNIX_TIMESTAMP(AcctStartTime) + AcctSessionTime > '%%b'"
	}
	
	sqlcounter counterChilliSpotMaxInputOctetsAll {
			counter_name = ChilliSpot-Max-Input-Octets
			check_name = CS-Input-Octets
			counter-type = data
			reply_name = ChilliSpot-Max-Input-Octets
			sql_module_instance = sql
			key = User-Name
			reset = never
			query = "SELECT IFNULL(SUM(AcctInputOctets),0) FROM radacct WHERE username = '%{${key}}' AND UNIX_TIMESTAMP(AcctStartTime) + AcctSessionTime > '%%b'"
	}


	sqlcounter counterChilliSpotMaxOutputOctetsDaily {
			counter_name = ChilliSpot-Max-Output-Octets-Daily
			check_name = CS-Output-Octets-Daily
			counter-type = data
			reply_name = ChilliSpot-Max-Output-Octets
			sql_module_instance = sql
			key = User-Name
			reset = daily
			query = "SELECT IFNULL(SUM(AcctOutputOctets),0) FROM radacct WHERE username = '%{${key}}' AND UNIX_TIMESTAMP(AcctStartTime) + AcctSessionTime > '%%b'"
	}


	sqlcounter counterChilliSpotMaxOutputOctetsWeekly {
			counter_name = ChilliSpot-Max-Output-Octets-Weekly
			check_name = CS-Output-Octets-Weekly
			counter-type = data
			reply_name = ChilliSpot-Max-Output-Octets
			sql_module_instance = sql
			key = User-Name
			reset = weekly
			query = "SELECT IFNULL(SUM(AcctOutputOctets),0) FROM radacct WHERE username = '%{${key}}' AND UNIX_TIMESTAMP(AcctStartTime) + AcctSessionTime > '%%b'"
	}


	sqlcounter counterChilliSpotMaxOutputOctetsMonthly {
			counter_name = ChilliSpot-Max-Output-Octets-Monthly
			check_name = CS-Output-Octets-Monthly
			counter-type = data
			reply_name = ChilliSpot-Max-Output-Octets
			sql_module_instance = sql
			key = User-Name
			reset = monthly
			query = "SELECT IFNULL(SUM(AcctOutputOctets),0) FROM radacct WHERE username = '%{${key}}' AND UNIX_TIMESTAMP(AcctStartTime) + AcctSessionTime > '%%b'"
	}

	
	sqlcounter counterChilliSpotMaxOutputOctetsQuarterly {
			counter_name = ChilliSpot-Max-Output-Octets-Quarterly
			check_name = CS-Output-Octets-Quarterly
			counter-type = data
			reply_name = ChilliSpot-Max-Output-Octets
			sql_module_instance = sql
			key = User-Name
			reset = 3m
			query = "SELECT IFNULL(SUM(AcctOutputOctets),0) FROM radacct WHERE username = '%{${key}}' AND UNIX_TIMESTAMP(AcctStartTime) + AcctSessionTime > '%%b'"
	}

	
	sqlcounter counterChilliSpotMaxOutputOctetsYearly {
			counter_name = ChilliSpot-Max-Output-Octets-Yearly
			check_name = CS-Output-Octets-Yearly
			counter-type = data
			reply_name = ChilliSpot-Max-Output-Octets
			sql_module_instance = sql
			key = User-Name
			reset = 12m
			query = "SELECT IFNULL(SUM(AcctOutputOctets),0) FROM radacct WHERE username = '%{${key}}' AND UNIX_TIMESTAMP(AcctStartTime) + AcctSessionTime > '%%b'"
	}
	
	sqlcounter counterChilliSpotMaxOutputOctetsAll {
			counter_name = ChilliSpot-Max-Output-Octets
			check_name = CS-Output-Octets
			counter-type = data
			reply_name = ChilliSpot-Max-Output-Octets
			sql_module_instance = sql
			key = User-Name
			reset = never
			query = "SELECT IFNULL(SUM(AcctOutputOctets),0) FROM radacct WHERE username = '%{${key}}' AND UNIX_TIMESTAMP(AcctStartTime) + AcctSessionTime > '%%b'"
	}

sqlcounter chillispot_max_bytes {
counter_name = ChilliSpot-Max-Total-Octets
check_name = ChilliSpot-Max-Total-Octets
reply_name = ChilliSpot-Max-Total-Octets
sql_module_instance = sql
key = User-Name
reset = never
query = "SELECT SUM(AcctInputOctets) + SUM(AcctOutputOctets) FROM radacct WHERE username = '%{${key}}'"
}
