/**
 * *************************
 * Jambula command objects *
 * *************************
 */


/** Check commands 
 *****************
*/

object CheckCommand "mailqcount" {
        import "plugin-check-command",

        command = [ PluginDir + "/check_mailqcount" ]
}

object CheckCommand "systemd" {
        import "plugin-check-command",

        command = [ PluginDir + "/check_systemd" ]
}

object CheckCommand "dvbt2-network" {
        import "plugin-check-command",

        command = [ PluginDir + "/check_dvbt2_network" ]
}

object CheckCommand "wifi_ap" {
        import "plugin-check-command",

        command = [ PluginDir + "/check_wifi_ap" ]
}

object CheckCommand "logfiles" {
        import "plugin-check-command",

        command = [ PluginDir + "/check_logfiles" ]

	arguments = {
		"--tag"="$tag$"
		"--criticalpattern"="$criticalpattern$"
		"--warningpattern"="$warningpattern$"
		"--logfile"="$logfile$"
	}
}

object CheckCommand "updates" {
        import "plugin-check-command",

        command = [ PluginDir + "/check_updates" ]
}


/** Notification commands 
 ************************
*/
object NotificationCommand "sms-host-notification" {
  import "plugin-notification-command"

  command = [ SysconfDir + "/icinga2/scripts/sms-host-notification.sh" ]

  env = {
    "NOTIFICATIONTYPE" = "$notification.type$"
    "HOSTALIAS" = "$host.display_name$",
    "HOSTADDRESS" = "$address$",
    "HOSTSTATE" = "$host.state$",
    "LONGDATETIME" = "$icinga.long_date_time$",
    "HOSTOUTPUT" = "$host.output$",
    "NOTIFICATIONAUTHORNAME" = "$notification.author$",
    "NOTIFICATIONCOMMENT" = "$notification.comment$",
    "HOSTDISPLAYNAME" = "$host.display_name$",
    "USEREMAIL" = "$user.email$"
  }

}

object NotificationCommand "sms-service-notification" {
  import "plugin-notification-command"

  command = [ SysconfDir + "/icinga2/scripts/sms-service-notification.sh" ]

  env = {
    "NOTIFICATIONTYPE" = "$notification.type$"
    "SERVICEDESC" = "$service.name$"
    "HOSTALIAS" = "$host.display_name$",
    "HOSTADDRESS" = "$address$",
    "SERVICESTATE" = "$service.state$",
    "LONGDATETIME" = "$icinga.long_date_time$",
    "SERVICEOUTPUT" = "$service.output$",
    "NOTIFICATIONAUTHORNAME" = "$notification.author$",
    "NOTIFICATIONCOMMENT" = "$notification.comment$",
    "HOSTDISPLAYNAME" = "$host.display_name$",
    "SERVICEDISPLAYNAME" = "$service.display_name$",
    "USEREMAIL" = "$user.email$"
  }

}

object NotificationCommand "on-screen-display-notification" {
  import "plugin-notification-command"

  command = [ SysconfDir + "/icinga2/scripts/osd-service-notification.sh" ]

  env = {
    "SERVICEDESC" = "$service.name$"
    "HOSTALIAS" = "$host.display_name$",
    "HOSTADDRESS" = "$address$",
    "SERVICESTATE" = "$service.state$",
    "LONGDATETIME" = "$icinga.long_date_time$",
    "SERVICEOUTPUT" = "$service.output$",
    "SERVICENOTES" = "$service.notes$",
    "HOSTDISPLAYNAME" = "$host.display_name$",
    "SERVICEDISPLAYNAME" = "$service.display_name$",
    "OSDMESSAGE" = "$service.vars.osd.message$",
  }

}


/** Event commands 
 *****************
*/
object EventCommand "internet-status-event" {
  import "plugin-event-command"

  command = [ SysconfDir + "/icinga2/scripts/internet-status-event.sh" ]

  env = {
    "HOSTALIAS" = "$host.display_name$",
    "HOSTADDRESS" = "$address$",
    "HOSTSTATE" = "$host.state$",
    "HOSTSTATEID" = "$host.state_id$",
    "HOSTSTATETYPE" = "$host.state_type$",
    "HOSTOUTPUT" = "$host.output$",
    "HOSTDISPLAYNAME" = "$host.display_name$",
    "LASTHOSTSTATE" = "$host.last_state$",
    "LASTEHOSTSTATEID" = "$host.last_state_id$",
    "LASTHOSTSTATETYPE" = "$host.last_state_type$",
    "LASTHOSTSTATECHANGE" = "$host.last_state_change$",
    "LASTHOSTCHECK" = "$host.last_check$",
    "LONGDATETIME" = "$icinga.long_date_time$",
  }

}

object EventCommand "wifi-ap-status-event" {
  import "plugin-event-command"

  command = [ SysconfDir + "/icinga2/scripts/wifi-ap-status-event.sh" ]

  env = {
    "SERVICEDESC" = "$service.name$"
    "HOSTALIAS" = "$host.display_name$",
    "HOSTADDRESS" = "$address$",
    "SERVICESTATE" = "$service.state$",
    "LONGDATETIME" = "$icinga.long_date_time$",
    "SERVICEOUTPUT" = "$service.output$",
    "HOSTDISPLAYNAME" = "$host.display_name$",
    "SERVICEDISPLAYNAME" = "$service.display_name$",
  }

}

object EventCommand "wifi-user-status-event" {
  import "plugin-event-command"

  command = [ SysconfDir + "/icinga2/scripts/wifi-user-status-event.sh" ]

  env = {
    "SERVICEDESC" = "$service.name$"
    "HOSTALIAS" = "$host.display_name$",
    "HOSTADDRESS" = "$address$",
    "SERVICESTATE" = "$service.state$",
    "LONGDATETIME" = "$icinga.long_date_time$",
    "SERVICEOUTPUT" = "$service.output$",
    "HOSTDISPLAYNAME" = "$host.display_name$",
    "SERVICEDISPLAYNAME" = "$service.display_name$",
  }

}
