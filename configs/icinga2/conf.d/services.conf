/*
 * ######################################################
 * #  jambula services                                  #
 * #  ****************                                  #
 * #  Tip: Use `icinga2 object list --type Service` to  #
 * #  list all service objects after running            # 
 * # configuration validation (`icinga2 daemon -C`).    #
 * #						        #
 * ######################################################
 */


/*
 * *******************
 * Systemd *
 * *******************
 * Used to monitor status of systemd - notify of failed units
 */

object Service "systemd" {
  import "jambula-01-service"

  host_name = "JambulaTV"
  check_command = "systemd"

  notes = "On Screen Display"

}

/*
 * *******************
 * WiFi AP Discovery *
 * *******************
 * Used to scan for preferred wireless access point
 */

object Service "Discover Wifi Access Point" {
  import "jambula-01-service"

  host_name = "JambulaTV"
  check_command = "wifi_ap"
  event_command = "wifi-ap-status-event"
  notes = "WiFi Access Point Discovery"

}

/*
 * ****************
 * Log files scan *
 * ****************
 * Used to scan for pattern in Log files
 */

object Service "Zoneminder Alert" {
  import "jambula-03-service"

  host_name = "JambulaTV"
  
  check_command = "logfiles"
  vars.cameraid = 1
  vars.logfile = "/var/log/JambulaTV/zoneminder/zma_m$cameraid$.log"
  vars.criticalpattern = ".*Opening new event .*alarm start.*"
  
  notes = "Camera Motion Detected"

}

/*
 * *******************
 * Check for Updates *
 * *******************
 * Used to check for available updates for JambulaTV
 */

object Service "Available Updates" {
  import "jambula-01-service"

  host_name = "JambulaTV"
  check_command = "updates"
  notes = "On Screen Display"

}

/*
 * ***********************
 * /JambulaTV Media Disk *
 * ***********************
 * Used to check disk space at /JambulaTV
 */

object Service "Media Disk Space" {
  import "jambula-01-service"

  host_name = "JambulaTV"
  check_command = "disk"

  vars.disk_partitions = "/JambulaTV"
  vars.disk_wfree = "20%"
  vars.disk_cfree = "15%"
  display_name = "Media Disk Space"

  notes = "On Screen Display"

}

